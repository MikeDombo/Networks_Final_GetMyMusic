{
  version: Int,
  type: String in [
    "listRequest",
    "listResponse",
    "pullRequest",
    "pullResponse",
    "pushRequest",
    "pushResponse",
    "leave",
  ],

IF TYPE == "listRequest" || TYPE == "leave"
  // no additional information

IF TYPE == "listResponse" || TYPE == "pullResponse" || TYPE = "pushResponse"
  response: {
    IF TYPE == "listResponse" || TYPE == "pushResponse"
      [{filename: String, checksum: String}]
    IF TYPE == "pullResponse"
      [{filename: String, checksum: String, data: String}]
  }

IF TYPE == "pullRequest" || TYPE == "pushRequest"
  request: {
    IF TYPE == "pullRequest"
      [{filename: String, checksum: String}]
    IF TYPE == "pushRequest"
      [{filename: String, checksum: String, data: String}]
  }

}
